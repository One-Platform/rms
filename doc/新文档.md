RMS权限系统
# 安装部署 #
部署：

1、	创建表及添加数据，执行权限数据库.sql

2、	将工程rms,rmsclient,rmsview三个工程导入开发工具，使用rmsview工程进行开发（rmsview依赖rms于rmsclient）。其中rms为权限数据交互及基本业务处理，rmsclient为权限控制，rmsview为权限部分的页面控制。

# 配置流程 #
	初始使用时，权限系统需要按照以下流程配置进行初始化权限。
1、	添加功能/菜单

即在本系统中通过页面配置权限单位Task，task可以是一个简单的功能，也可以是一个带有URL的菜单。

2、	功能授权

创建好功能/菜单后，需要对功能/菜单进行授权。授权是指将本级组织机构具有权限的向下级组织机构进行授权。由此在授权时具有最顶级机构具有最大权限，通过层级授权，下级机构权限越小的特性。

3、	配置角色

角色是含有一个或者多个权限的单位。
角色配置中除了角色基本信息配置外，还需要进行指派。角色的指派类似功能授权，即将上级具有的角色直接指派给下级机构使用。但是在角色指派过程中，下级机构被指派的角色所带有的权限集合，不会大于功能授权时所具有权限集合。

4、	用户组配置

用户组包含一个活多个角色，同时使在这个组内的用户直接授予这些角色。
任何用户所在只能使用本级组织机构下的用户组。

5、	人员配置

为人员配置、修改权限。

#操作说明#

## 功能菜单配置##

为系统添加新的功能，选择权限管理—功能菜单管理。选择后显示当前所有功能的信息。
如图：
 
![](http://i.imgur.com/C33HQt6.png)
点击新建功能按钮，显示功能信息输入框
如图：

![](http://i.imgur.com/C12m6b3.png)
 
各输入框说明：


- 功能ID：功能的编号，必须输入，输入后不可修改。



- 功能名称：功能的名称，非必须输入，可修改。



- 是否为菜单：设置该功能是否作为菜单显示。



- 菜单链接：作为菜单时的连接，非必须输入，可修改。



- 菜单名称：作为菜单时显示的名称，非必须输入，可修改。



- 系统标志：为系统里的功能提供一个统一的标识，必须输入，可修改。（当权限控制多个系统时，由该标志标识系统功能，进行区别）



- 父节点设置：若需要将新建的功能放入已有的功能节点下，则点击选择父节点按钮，弹出显示新的功能树框。
如图：
 
![](http://i.imgur.com/vlBiDSs.png)

点击选择需要加入的节点，将父功能带入输入框中，完成父功能的选择。
如图：

![](http://i.imgur.com/2QmK9bS.png)
 
状态选择框：功能的使用状态是，使用中/不使用。
是否显示为菜单：是否将功能作为菜单显示，是/否。

功能类型：设置该功能是否是所有级别的机构可以使用，所有可见:所有的机构可以使用不需要授权。默认：创建时的机构可见，下级机构需要授权可以使用。不可修改。
输入完信息后保存，左侧功能树刷新显示新建功能。
如图：
 

![](http://i.imgur.com/tbpQ5Ko.png)

## 功能授权

选择权限管理—功能授权。
显示当前登陆用户所机构以下的子机构。
如图：

![](http://i.imgur.com/JGEHgTr.png)
 
选择需要授权功能的机构节点，右边弹出该节点其父节点具有的功能，即任一节点的功能都从父节点而来（授权操作中，所授权的功能为功能配置中类型为‘默认’的功能，而‘所有可见’类型的功能不需要授权。）
如图：

![](http://i.imgur.com/Y7veaMk.png)


选择授权的功能后，点击保存，弹出成功提示后，完成授权操作。
如图：

![](http://i.imgur.com/xbhiAeJ.png)

##角色管理

###角色基本配置

角色的基本管理，包含增加修改删除等操作。

**增加角色**

为系统创建一个新的角色
在3.3.1查询页面中选择增加按钮。打开角色创建窗口。如图：

![](http://i.imgur.com/XlA8nwh.png)

为角色添加基本信息：

- 角色名称

- 角色描述

- 角色含有的功能（功能集合根据登陆用户所在的机构所具有的功能获得）

- 角色类型，角色类型分为默认及所有可见，

     默认类型为：所创建的角色只能在本机构使用，需要让其他机构使用需要进行角色指派操作。

     所有可见类型为：所创建的角色直接在任何机构中使用。
 
完成角色基本信息，点击保存后完成新建角色。之后返回角色查询页面。


**删除角色**

在角色列表点击删除按钮删除角色，如果登陆用户不属于不属于该角色创建时所属机构，则无法删除。

![](http://i.imgur.com/rHpQRGO.png)


**修改角色**

为已经创建好的角色修改角色信息。

点击权限管理—角色管理菜单，进入查询页面，选择需要修改的角色点击修改按钮。
如图：
 
![](http://i.imgur.com/l2OVePn.png)

用户修改角色信息时必须为与创建该角色时相同的机构，否则不能修改，即指派而来的角色无法修改，如图：

![](http://i.imgur.com/LlIjCOB.png)

修改完成后点击保存，在弹出保存提示后，跳转操作成功页面完成操作。最后回到查询页面。



**查询角色**

查看系统已经创建的角色。

点击权限管理—角色管理菜单。
显示角色查询页面。直接显示系统已经创建的角色列表。
如图：

![](http://i.imgur.com/asr1aQP.png)

可按名字查询角色，如图：

![](http://i.imgur.com/J0oeqUu.png)

###角色指派

角色指派指为下级组织机构分配角色，使下级组织机构获得角色的使用权。
点击权限管理—角色管理—角色指派菜单，进入角色指派页面。显示当前登陆用户所在机构其下的子机构。
如图：
 
![](http://i.imgur.com/ezHVRgG.png)

选择点击机构节点，右边显示该机构可以指派的角色列表（该列表为登陆用户所在机构中已有的角色），已选的为已经指派的角色。
如图：
 
![](http://i.imgur.com/DfKb26B.png)

点击保存，完成指派操作。指派后该机构将可使用该角色，但无法修改及删除。

##用户组管理


**添加用户组**

为系统创建一个新的用户组。
在3.3.1查询页面中选择增加按钮。跳转用户组创建页面。
如图：

![](http://i.imgur.com/tvrNHgE.png)

为用户组添加基本信息：

- 用户组名称

- 用户组描述、

- 用户组关联的的角色（多选）。 

如图：

![](http://i.imgur.com/CrC1QTp.png)

点击保存后完成添加用户组。

**删除角色**

在用户组列表点击删除按钮删除用户组，如果登陆用户不属于不属于该用户组创建时所属机构，则无法删除。

![](http://i.imgur.com/yOyNUlN.png)

**修改与查看用户组**

通过修改用户组，可查看用户组详细信息。
点击权限管理—用户组管理菜单，进入查询页面，选择需要修改的用户组点击修改按钮。
如图：

![](http://i.imgur.com/DIrXdaS.png)

修改信息并保存，完成修改


**查询用户组**

查看系统已经创建的用户组。
点击权限管理—用户组管理菜单。
显示角色查询页面。直接显示系统已经创建的用户组。
如图：

![](http://i.imgur.com/71iA4xP.png)

**管理组成员**

点击管理用户组成员，弹出用户组成员框，该回话框显示的是已在该用户组下的成员，如图：

![](http://i.imgur.com/EUSenzp.png)

点击删除，则是将用户组成员移除出该组。（如果某用户不再属于任何一个用户组，则表示没有任何权限。）
 
如果需要为用户组添加用户，则点击添加用户组按钮，回话框切换到查询用户页面。如图：

![](http://i.imgur.com/dTdkD4p.png)

该界面可以查询到所有员工，如果某员工并未被赋予权限，那么加入用户组后则可以直接获取在该组下的，并且是在当前登陆机构下的所有权限。

##人员配置

为人员配置权限。

点击权限管理—人员配置菜单，显示人员配置页面。如图：

![](http://i.imgur.com/KeafVej.png)

页面显示所有人员，其中未引入权限的人员数据权限配置按钮为不可用。
 
点击权限设置按钮，打开配置窗口，如图：

![](http://i.imgur.com/19tMY6c.png)

配置窗口左边显示当前组织机构开始到其下级所有子机构的机构树，点击任意机构节点将弹出用户组列表.如图：

![](http://i.imgur.com/tVDSPxw.png)



在未引入人员中，选择一位人员点击引入按钮，进入功能配置页面。
如图：
 
为用户选择用户组后，将显示用户所关联的角色与角色所关联的功能。
（此处的角色为用户组关联的角色，并且为该机构可见的角色，范围不超过全可见角色与指派于改机构的角色的总和。所显示的功能范围不超过授权于该机构的功能与所有可见的功能总和）
配置好人员功能与用户组信息后点击保存，完成配置。
 
